<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./style.css" />
  <link rel="stylesheet" href="./menu.css" />


  <title>Snake game</title>
</head>

<body>
</body>

<script src="./libs/Tone.min.14.8.49.js"></script>
<script src="./js/sketches/snake-game/Cell.js"></script>
<script src="./js/sketches/snake-game/SnakeGame.js"></script>
<script src="./js/sketches/snake-game/Grid.js"></script>
<script src="./js/Sound.js"></script>
<script src="./js/sketches/snake-game/Snake.js"></script>
<script src="./js/sketches/snake-game/Food.js"></script>
<script src="./js/InputHandler.js"></script>
<script src="./js/sketches/snake-game/SnakeDirection.js"></script>

<script src="./js/Menu.js"></script>

<script src="./js/state-machine/AppState.js"></script>
<script src="./js/state-machine/AppStateMachine.js"></script>

<script src="./js/top-level-menu/states/TopLevelMenuState.js"></script>

<script src="./js/sketches/snake-game/states/SnakeGamePlayingState.js"></script>
<script src="./js/sketches/snake-game/states/SnakeGameOptionsState.js"></script>
<script src="./js/sketches/snake-game/states/SnakeGameGameOverState.js"></script>
<script src="./js/sketches/snake-game/states/SnakeGamePausedState.js"></script>
<script src="./js/sketches/snake-game/states/SnakeGameMainMenuState.js"></script>
<script src="./js/sketches/snake-game/states/SnakeGameSplashScreenState.js"></script>
<script src="./js/sketches/snake-game/preload-emoji-svgs.js"></script>


<script>

  const gameStateMachine = new AppStateMachine();

  // Define transitions
  // gameStateMachine.addTransition(SnakeGameSplashScreenState, SnakeGameMainMenuState);
  //gameStateMachine.addTransition(SnakeGameMainMenuState, SnakeGameOptionsState);
  gameStateMachine.addTransition(TopLevelMenuState, SnakeGameMainMenuState);
  gameStateMachine.addTransition(SnakeGameMainMenuState, SnakeGamePlayingState);
  gameStateMachine.addTransition(SnakeGameMainMenuState, TopLevelMenuState);
  gameStateMachine.addTransition(SnakeGamePlayingState, SnakeGamePausedState);
  gameStateMachine.addTransition(SnakeGamePlayingState, SnakeGameGameOverState);
  gameStateMachine.addTransition(SnakeGamePausedState, SnakeGamePlayingState);
  gameStateMachine.addTransition(SnakeGamePausedState, TopLevelMenuState);
  gameStateMachine.addTransition(SnakeGamePausedState, SnakeGameMainMenuState);
  gameStateMachine.addTransition(SnakeGameGameOverState, SnakeGameMainMenuState);
  gameStateMachine.addTransition(SnakeGameGameOverState, TopLevelMenuState);
  


  var game;
  var inputHandler = new InputHandler();

  // add to the debug div that we are starting the game
  //document.querySelector('.debug span').textContent = 'Starting the game...';

  gameStateMachine.changeState(TopLevelMenuState);


  /*
  navigator.getBattery().then((battery) => {
    // update the level info immediately
    updateLevelInfo();

    // ... and then again whenever the level changes
    battery.addEventListener("levelchange", () => {
      updateLevelInfo();
    });
    
    function updateLevelInfo() {
      document.querySelector('.debug span').textContent = `Battery level: ${battery.level * 100}%`;
    }

  });
  */


</script>

</html>